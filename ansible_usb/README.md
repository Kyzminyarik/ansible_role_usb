# ansible_usb
Данный проект реализует роль на Ansible роль, выполняющую следующие действия:
﻿﻿﻿Роль просит пользователя вставить USB-флешку (или любое другое USB устройство).
Роль запоминает что за устройство было установленно.
﻿﻿﻿Роль проверяет что появилось новое USB устройство.
﻿﻿﻿Роль просит пользователя удалить USB устройство.
﻿﻿﻿Роль убеждается что USB устройство удалено.
Роль просит вернуть USB устройство.
Роль убеждается что вставленно то же самое USB устройство, что было вставленно на шаге 2.

Технические параметры:
В качестве ssh-сервера использовалась виртуальная машина linux Ubuntu Ubuntu 20.04.4 LTS. В качесвте ssh-клиента Ubuntu Server 22.04.03 LTS. Подключение было организовано чреез SSH по логину и паролю.
Версия ansible: core 2.13.13

Краткий анализ файлов:

В конфиругационном файле ansible.cfg харниться путь до файла my_inventory. 
В свою очередь файл my_invetory содержит спсиок хостов. В нашем случае у нас один хост. Для этого хоста мы указываем название, ip адресс, а также логин и пароль для доступа по ssh.
В файле playbook.yml описано то, что будет выполнять наш клиент. Там описано название плэйбука, хосты, на которые он будет распространяться, а также РОЛЬ, которую он будет испольнять.
В нашем случае ansible-role-usb.
В файле /ansible-role-usb/tasks/main.yml описана сама реализация роли.
Если кратко, то выборка роли производилась с помощью команды ls. С помощью нее мы просматривали каталог /dev/disk/by-id и в нем делали выборку по содержанию ключевого слова usb.
Обязательным условием было запоминание устрйоств, без этого задача не была бы выполнена. 
Также стоит обратить внимание на задержку, которая необходима для того, чтобы система успевала обновлять информацию об устройствах.


Тесты проходили на двух развернутых вирутальных машинах, одна была в качестве сервера, другая в качестве клиента. Все компоненты работают корректно, задача выполнена.

 
